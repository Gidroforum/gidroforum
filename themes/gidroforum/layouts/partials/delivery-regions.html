<!-- –ë–ª–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –†–æ—Å—Å–∏–∏ -->
<section class="delivery-regions">
  <div class="container">
    <h2>{{ .Site.Params.delivery.title }}</h2>
    <p class="subtitle">{{ .Site.Params.delivery.subtitle }}</p>
    
    <div class="delivery-grid">
      {{ range .Site.Params.delivery.regions }}
      <div class="delivery-card">
        <div class="delivery-header">
          <h3>–î–æ—Å—Ç–∞–≤–∫–∞ –≤ {{ .name }}</h3>
          {{ if .hasWarehouse }}
          <span class="warehouse-badge">üéØ –°–∫–ª–∞–¥ –≤ –Ω–∞–ª–∏—á–∏–∏</span>
          {{ end }}
        </div>
        
        <div class="delivery-info">
          <p><strong>–°—Ä–æ–∫:</strong> {{ .deliveryDays }} —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è</p>
          <p><strong>–£—Å–ª–æ–≤–∏—è:</strong> {{ .priceNote }}</p>
          
          {{ if .phone }}
          <p class="contact-phone">
            <strong>–¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è {{ .name }}:</strong><br>
            <a href="tel:{{ .phone }}">{{ .phone }}</a>
          </p>
          {{ end }}
          
          <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Ä–∞—Å—á–µ—Ç–∞ -->
          <button class="btn-calculate" 
                  data-city="{{ .name }}"
                  data-slug="{{ .slug }}">
            üì¶ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É –≤ {{ .name }}
          </button>
        </div>
      </div>
      {{ end }}
    </div>
    
    <div class="delivery-footer">
      <p class="default-text">
        {{ .Site.Params.delivery.defaultText }}
      </p>
      <button class="btn-primary" id="openDeliveryForm">
        üöö –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞—Å—á–µ—Ç –ø–æ –≤–∞—à–µ–º—É –≥–æ—Ä–æ–¥—É
      </button>
    </div>
  </div>
</section>

<!-- –§–æ—Ä–º–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
<div id="deliveryFormModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h3>–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
    <form id="deliveryForm">
      <input type="hidden" id="selectedCity" name="city">
      
      <div class="form-group">
        <label>–í–∞—à –≥–æ—Ä–æ–¥ *</label>
        <select id="citySelect" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
          {{ range .Site.Params.delivery.regions }}
          <option value="{{ .slug }}">{{ .name }}</option>
          {{ end }}
          <option value="other">–î—Ä—É–≥–æ–π –≥–æ—Ä–æ–¥</option>
        </select>
        <input type="text" id="otherCity" placeholder="–£–∫–∞–∂–∏—Ç–µ –≤–∞—à –≥–æ—Ä–æ–¥" style="display:none;">
      </div>
      
      <div class="form-group">
        <label>–¢–∏–ø –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è *</label>
        <select name="equipment_type" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
          <option value="centrifugal">–¶–µ–Ω—Ç—Ä–æ–±–µ–∂–Ω—ã–µ –Ω–∞—Å–æ—Å—ã</option>
          <option value="drainage">–î—Ä–µ–Ω–∞–∂–Ω—ã–µ –Ω–∞—Å–æ—Å—ã</option>
          <option value="chemical">–•–∏–º–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å–æ—Å—ã</option>
          <option value="other">–î—Ä—É–≥–æ–µ</option>
        </select>
      </div>
      
      <button type="submit" class="btn-submit">üìß –ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å—á–µ—Ç</button>
    </form>
  </div>
</div>

<style>
  .delivery-regions {
    padding: 40px 0;
    background: #f8f9fa;
  }
  .delivery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    margin: 30px 0;
  }
  .delivery-card {
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border-left: 4px solid #007bff;
  }
  .warehouse-badge {
    background: #28a745;
    color: white;
    padding: 3px 8px;
    border-radius: 4px;
    font-size: 12px;
  }
  .btn-calculate {
    background: #007bff;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 4px;
    cursor: pointer;
    width: 100%;
    margin-top: 10px;
  }
  .modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
  }
  .modal-content {
    background: white;
    margin: 10% auto;
    padding: 20px;
    width: 90%;
    max-width: 500px;
    border-radius: 8px;
  }
</style>

<script>
  // –ü—Ä–æ—Å—Ç–æ–π JavaScript –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ñ–æ—Ä–º—ã
  document.addEventListener('DOMContentLoaded', function() {
    // –ö–Ω–æ–ø–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
    document.querySelectorAll('.btn-calculate').forEach(btn => {
      btn.addEventListener('click', function() {
        const city = this.getAttribute('data-city');
        document.getElementById('selectedCity').value = city;
        document.getElementById('citySelect').value = this.getAttribute('data-slug');
        document.getElementById('deliveryFormModal').style.display = 'block';
      });
    });
    
    // –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º—ã
    document.getElementById('openDeliveryForm').addEventListener('click', function() {
      document.getElementById('deliveryFormModal').style.display = 'block';
    });
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    document.querySelector('.close').addEventListener('click', function() {
      document.getElementById('deliveryFormModal').style.display = 'none';
    });
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ "–î—Ä—É–≥–æ–π –≥–æ—Ä–æ–¥"
    document.getElementById('citySelect').addEventListener('change', function() {
      const otherInput = document.getElementById('otherCity');
      otherInput.style.display = this.value === 'other' ? 'block' : 'none';
      if (this.value !== 'other') otherInput.value = '';
    });
  });
</script>